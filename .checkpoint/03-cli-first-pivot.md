# 체크포인트: CLI-First 전략 전환

## 결정 일시
2025-01-07

## 배경
- TUI 중심으로 개발을 시작했으나 구조적 한계 직면
- God Object 안티패턴 (Model 115+ 필드)
- 테스트 불가능한 구조
- 하지만 CLI 백업은 이미 완벽하게 동작 중

## 전환 이유

### 1. 실제 동작하는 코드
```bash
./cli-recover backup filesystem code-server-659b844f98-6z8lj /home/coder/code/mirror-crewAI --namespace vscode
```
- kubectl exec 통합 완료
- 진행률 모니터링 동작
- 크기 추정 & ETA 계산 구현

### 2. CLI의 장점
- **즉각적 가치**: 바로 사용 가능
- **자동화 용이**: 스크립트, CI/CD 통합
- **테스트 간편**: 입출력이 명확
- **디버깅 쉬움**: 단순한 인터페이스

### 3. 더 나은 아키텍처
- CLI = 비즈니스 로직
- TUI = 프레젠테이션 레이어
- 명확한 관심사 분리

## 보존할 자산

### 학습한 내용
- Bubble Tea 프레임워크 사용법
- 4단계 화면 플로우 설계
- 사용자 경험 패턴

### 재사용 가능한 코드
- kubectl 실행 로직
- 진행률 계산 알고리즘
- 에러 처리 패턴
- 파일 크기 추정 로직

### 설계 결정사항
- Hexagonal Architecture
- Plugin Pattern
- Ring Buffer 메모리 관리

## 새로운 방향

### 개발 원칙
```
"Make it work → Make it right → Make it pretty"
```

### Phase별 목표
1. **CLI 핵심 완성** (1주)
   - 3가지 백업 타입 지원
   - 표준화된 명령 체계

2. **아키텍처 정리** (1주)
   - BackupProvider 인터페이스
   - 플러그인 시스템

3. **CLI 고도화** (2주)
   - restore, list, status 명령
   - 설정 파일, 로깅

4. **TUI 통합** (2주)
   - CLI 래핑
   - 인터랙티브 UI

## 위험 관리

### 식별된 위험
- 기존 TUI 코드 폐기 → 레퍼런스로 보존
- 사용자 혼란 → 명확한 마이그레이션 가이드
- 일정 지연 → 동작하는 코드부터 시작

### 완화 전략
- 점진적 개발과 배포
- 기존 기능 호환성 유지
- 명확한 문서화

## 성공 지표
- v0.2.0: CLI 모든 백업 타입 지원
- v0.3.0: 플러그인 아키텍처 완성
- v0.4.0: 프로덕션 레벨 CLI
- v1.0.0: TUI 통합 완료

## 다음 단계
1. 기존 TUI 브랜치 백업
2. CLI 명령 체계 구조화 시작
3. filesystem provider 리팩토링

## 참고사항
- 이 결정은 프로젝트의 장기적 성공을 위한 것
- 실용적이고 점진적인 접근
- 사용자에게 즉각적 가치 제공이 최우선
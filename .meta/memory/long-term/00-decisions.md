# 주요 결정사항

## 2025-07-13: 아키텍처 단순화

### 문제
- 헥사고날 아키텍처로 인한 과도한 복잡도 (85/100)
- 불필요한 추상화 레이어
- 빈 인터페이스와 미사용 디렉토리
- 전략 패턴의 복잡성

### 결정
- 전통적인 Go 프로젝트 구조로 전환
- Unix pipe만 사용 (Go io.Pipe 제거)
- 헥사고날 아키텍처 완전 제거
- 모듈 이름 수정: cli-recover → cli-pipe

### 구현
- internal/pipeline/: 핵심 로직 통합
- internal/logger/: 간단한 로깅 유틸리티
- 직접적인 함수 호출
- 테스트 커버리지 94.3%

### 결과
- 복잡도: 85/100 → 35/100
- 코드 라인 수: 80% 감소
- 성능 향상 (오버헤드 감소)
- 데드락 문제 완전 해결

## 2024-07-13: 하이브리드 실행 전략 도입

### 문제
- io.Pipe 사용 시 데드락 발생
- grep 같은 블로킹 명령어에서 전체 입력 대기
- 동시 실행 goroutine들이 서로 대기

### 결정
- Unix pipe와 Go stream의 하이브리드 전략 구현
- 단순 선형 파이프라인: Unix pipe (커널 버퍼 활용)
- 복잡한 파이프라인: Go stream (세밀한 제어)

### 구현
- ExecutionStrategy 인터페이스
- ShellPipeStrategy: bash -c로 실행
- GoStreamStrategy: 의존성 기반 그룹 실행
- 자동 전략 선택 (수동 지정도 가능)

### 결과
- 데드락 문제 완전 해결
- 성능 향상 (Unix pipe의 효율성)
- 로깅 기능 유지 (tee 활용)

## 2024-01-12: YAML 스키마 설계

### 결정
- 명시적 입출력 기반 설계
- Step 간 이름으로 연결
- 변수 바인딩 지원

### 이유
- Unix 파이프라인과 유사한 모델
- DAG 구조 자연스럽게 표현
- 재사용과 분기 쉽게 처리

## 2024-01-10: Go 선택

### 결정
- 주 언어로 Go 채택

### 이유
- 단일 바이너리 배포
- 우수한 동시성 모델
- 크로스 플랫폼 지원
- 적은 메모리 사용량